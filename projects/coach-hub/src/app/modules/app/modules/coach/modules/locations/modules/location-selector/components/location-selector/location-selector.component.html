<div class="locationContainer" *ngIf="locationControl">

  <mat-form-field class="w-100" appearance="outline" *ngIf="{loading: isLoading | async} as loader">
    <mat-label *ngIf="!loader.loading">Location</mat-label>
    <mat-label *ngIf="loader.loading">
      <ch-form-field-spinner></ch-form-field-spinner>
    </mat-label>

    <mat-select
      [formControl]="locationControl"
      (selectionChange)="onSelectChanged($event)"
      (click)="onSelectClicked()"
    >
      <mat-option *ngFor="let location of locations" [value]="location.id">
        {{ location.name }}
      </mat-option>
    </mat-select>

    <mat-error *ngIf="locationControl.hasError('required')">
      This field is required
    </mat-error>
  </mat-form-field>

  <button
    *ngIf="locationControl.enabled"
    class="locationButton"
    mat-mini-fab color="primary"
    type="button"
    matTooltip="Create new location"
    (click)="addLocation()"
  >
    <mat-icon aria-label="Add new location">add</mat-icon>
  </button>
</div>

