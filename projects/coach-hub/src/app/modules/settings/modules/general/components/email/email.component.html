<div class="container py-3">
  <mat-card>
    <ch-simple-loader [loader]="loader"></ch-simple-loader>
    <mat-card-header>
      <mat-card-title>Change your current email address</mat-card-title>
      <mat-card-subtitle><strong>{{ userEmail$ | async }}</strong></mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>

      <form [formGroup]="formGroup" (ngSubmit)="onSubmit()">

        <div class="row">
          <mat-form-field class="col-12">
            <mat-label>New Email</mat-label>
            <input matInput
                   formControlName="email"
                   tabindex="1"
                   autofocus>

            <mat-error *ngIf="formGroup.get('email').hasError('required')">
              Email is required
            </mat-error>

            <mat-error *ngIf="formGroup.get('email').hasError('email')">
              Please enter a valid email address
            </mat-error>

          </mat-form-field>

          <mat-form-field class="col-12">
            <mat-label>Current Password</mat-label>
            <input matInput
                   type="password"
                   formControlName="password"
                   tabindex="2">

            <mat-error *ngIf="formGroup.get('password').hasError('required')">
              Password is required
            </mat-error>

            <mat-error *ngIf="formGroup.get('password').hasError('minlength')">
              Password must be a minimum of 6 characters
            </mat-error>

          </mat-form-field>
        </div>

        <a [routerLink]="'/' + forgotPasswordRoute" [queryParams]="{email: userEmail$ | async}"
           tabindex="5"
           class="float-right">
          Forgot Password?
        </a>

        <div class="clearfix"></div>
        <ch-simple-message [message]="formMsg | async"></ch-simple-message>

        <button mat-raised-button
                color="primary"
                type="submit"
                tabindex="4">
          Update
        </button>

      </form>

    </mat-card-content>

  </mat-card>
</div>
